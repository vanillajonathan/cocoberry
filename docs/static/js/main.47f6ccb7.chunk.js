(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(26)},22:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(10),l=(a(19),a(12)),r=a(11),s=a(3),c=a(4),o=a(6),m=a(5),d=a(7),u=a(1),h=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(e){var t=e.currentTarget.innerText.toLowerCase();t===this.props.activeTag&&(t=""),this.props.onClick(t)}},{key:"render",value:function(){var e=this;return n.createElement("ul",{className:"list-inline"},this.props.tags.map(function(t){var a="badge ";return a+=t.toLowerCase()===e.props.activeTag?"badge-primary":"badge-light",n.createElement("li",{className:"list-inline-item",key:t},n.createElement("span",{className:a,onClick:e.handleClick},t))}))}}]),t}(n.Component),p=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={name:a.props.name||"",tag:""},a.handleChange=a.handleChange.bind(Object(u.a)(Object(u.a)(a))),a.handleClose=a.handleClose.bind(Object(u.a)(Object(u.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleClose",value:function(){this.props.onClose()}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onAdd(this.state.name,this.state.tag)}},{key:"render",value:function(){var e=this,t="modal fade",a="fade";return this.props.show&&(t+=" d-block show",a+=" modal-backdrop show"),n.createElement(n.Fragment,null,n.createElement("div",{className:t,tabIndex:-1,role:"dialog"},n.createElement("div",{className:"modal-dialog",role:"document"},n.createElement("div",{className:"modal-content"},n.createElement("div",{className:"modal-header"},n.createElement("h5",{className:"modal-title"},"Add experience"),n.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.handleClose},n.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.createElement("form",{onSubmit:this.handleSubmit},n.createElement("div",{className:"modal-body"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"name"},"Title"),n.createElement("input",{className:"form-control",id:"name",type:"text",value:this.state.name,onChange:this.handleChange,autoFocus:!0,required:!0})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Tag"),n.createElement(h,{activeTag:this.state.tag,tags:this.props.tags,onClick:function(t){return e.setState({tag:t})}}))),n.createElement("div",{className:"modal-footer"},n.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:this.handleClose},"Close"),n.createElement("button",{type:"submit",className:"btn btn-primary"},"Add")))))),n.createElement("div",{className:a}))}}]),t}(n.Component),g=a(8),b=a.n(g),f=function(e){function t(e){return Object(s.a)(this,t),Object(o.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"compare",value:function(e,t){return null==e.last||null==t.last?0:e.last<t.last?-1:e.last>t.last?1:0}},{key:"render",value:function(){var e=this.props.experiences.filter(function(e){return null!=e.last&&e.last<b()().subtract(1,"w").valueOf()&&e.last>b()().subtract(2,"w").valueOf()}).sort(this.compare),t=this.props.experiences.filter(function(e){return null!=e.last&&e.last<b()().subtract(1,"m").valueOf()&&e.last>b()().subtract(2,"m").valueOf()}).sort(this.compare),a=this.props.experiences.filter(function(e){return null!=e.last&&e.last<b()().subtract(1,"y").valueOf()&&e.last>b()().subtract(2,"y").valueOf()}).sort(this.compare);return n.createElement(n.Fragment,null,n.createElement(v,{onClick:this.props.onClick,experiences:this.props.experiences.sort(this.compare)}),e.length>0&&n.createElement(n.Fragment,null,n.createElement("h2",{className:"h5"},"A week ago"),n.createElement(v,{onClick:this.props.onClick,experiences:e})),t.length>0&&n.createElement(n.Fragment,null,n.createElement("h2",{className:"h5"},"A month ago"),n.createElement(v,{onClick:this.props.onClick,experiences:t})),a.length>0&&n.createElement(n.Fragment,null,n.createElement("h2",{className:"h5"},"A year ago"),n.createElement(v,{onClick:this.props.onClick,experiences:a})))}}]),t}(n.Component),v=function(e){return n.createElement("div",{className:"list-group mb-3"},e.experiences.map(function(t){return n.createElement("a",{className:"list-group-item list-group-item-action",key:t.id,onClick:function(){return e.onClick(t.id)}},t.name,null!=t.last&&n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("small",{className:"float-right text-muted"},new Date(t.last).toLocaleDateString("sv-se"))),n.createElement("time",{className:"d-block text-muted small",dateTime:new Date(t.last).toISOString(),title:t.last.toString()},b()(t.last).fromNow())))}))},E=(a(22),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).tags=["Fruit","Vegetable","Activity"],a.state={search:"",showDialog:!1,showTags:!1,tag:""},a.handleAddExperience=a.handleAddExperience.bind(Object(u.a)(Object(u.a)(a))),a.handleAddExperienceButtonClick=a.handleAddExperienceButtonClick.bind(Object(u.a)(Object(u.a)(a))),a.handleChange=a.handleChange.bind(Object(u.a)(Object(u.a)(a))),a.handleClose=a.handleClose.bind(Object(u.a)(Object(u.a)(a))),a.handleDropdownClick=a.handleDropdownClick.bind(Object(u.a)(Object(u.a)(a))),a.handleTagClick=a.handleTagClick.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleAddExperience",value:function(e,t){this.setState({showDialog:!1}),this.props.onAddExperience(e,t)}},{key:"handleAddExperienceButtonClick",value:function(){this.setState({showDialog:!0})}},{key:"handleChange",value:function(e){this.setState({search:e.currentTarget.value})}},{key:"handleDropdownClick",value:function(e){e.target.parentElement.classList.toggle("dropup"),this.setState(function(e){return{showTags:!e.showTags}})}},{key:"handleTagClick",value:function(e){this.setState({tag:e})}},{key:"handleClose",value:function(){this.setState({showDialog:!1})}},{key:"render",value:function(){var e,t=this;return""!==this.state.search||""!==this.state.tag?(e=this.props.experiences.filter(function(e){return e.name.toLowerCase().includes(t.state.search.toLowerCase())}),""!==this.state.tag&&(e=e.filter(function(e){return null!=e.tag&&e.tag.includes(t.state.tag)}))):e=this.props.experiences.filter(function(e){return null!=e.last}),n.createElement(n.Fragment,null,n.createElement("header",{className:"bg-white fixed-top shadow-sm"},n.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-white"},n.createElement("span",{className:"navbar-brand d-none d-xl-block"},"Cocoberry"),n.createElement("div",{className:"form-inline mr-auto"},n.createElement("div",{className:"input-group"},n.createElement("input",{className:"form-control",type:"search",accessKey:"s",placeholder:"Search\u2026",title:"Search",onChange:this.handleChange,"aria-label":"Search"}),n.createElement("div",{className:"input-group-append mr-sm-2"},n.createElement("button",{className:"btn btn-outline-success dropdown-toggle",type:"button",onClick:this.handleDropdownClick,"aria-label":"Show tags"})))),n.createElement("button",{className:"btn btn-outline-success mr-sm-2",accessKey:"n",onClick:this.handleAddExperienceButtonClick,title:"Add new experience"},"+"),n.createElement("button",{className:"btn btn-outline-success",accessKey:"p",onClick:function(){return t.props.onNavigation("Preferences")}},"\u2630")),this.state.showTags&&n.createElement("div",{className:"container"},n.createElement(h,{activeTag:this.state.tag,tags:this.tags,onClick:this.handleTagClick}))),n.createElement("main",{className:"App container"},n.createElement(f,{experiences:e,onClick:this.props.onClick}),0===e.length&&n.createElement(n.Fragment,null,n.createElement("p",null,"There are no matched experiences."),n.createElement("button",{className:"btn btn-outline-secondary",onClick:this.handleAddExperienceButtonClick},"Add new experience"))),n.createElement(p,{name:this.state.search,show:this.state.showDialog,tags:this.tags,onAdd:this.handleAddExperience,onClose:this.handleClose}))}}]),t}(n.Component)),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleExport=a.handleExport.bind(Object(u.a)(Object(u.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(Object(u.a)(a))),a.fileInput=n.createRef(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleExport",value:function(){var e=JSON.stringify(this.props.export),t=new File([e],"cocoberry.json",{type:"octet/stream"}),a=window.URL.createObjectURL(t);window.location.assign(a),window.URL.revokeObjectURL(a)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new FileReader;a.onloadend=function(){if("string"===typeof a.result)try{var e=JSON.parse(a.result);t.props.onImport(e)}catch(n){alert(n)}},a.readAsText(this.fileInput.current.files[0])}},{key:"render",value:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement("header",{className:"fixed-top shadow-sm"},n.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-white"},n.createElement("button",{className:"btn btn-outline-success",accessKey:"b",onClick:function(){return e.props.onNavigation("")}},"Back"))),n.createElement("main",{className:"App container"},n.createElement("form",{onSubmit:this.handleSubmit},n.createElement("p",null,"Export and import configuration."),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"file"},"File"),n.createElement("input",{className:"form-control-file",id:"file",type:"file",accept:".json",ref:this.fileInput,required:!0})),n.createElement("input",{className:"btn btn-secondary mr-1",type:"submit",value:"Import from file"}),n.createElement("button",{className:"btn btn-secondary",type:"button",accessKey:"e",onClick:this.handleExport},"Export to file"))),n.createElement("footer",{className:"container mt-3"},n.createElement("p",null,"Built with \u2764 by Jonathan")))}}]),t}(n.Component),k=a(2),C=a.n(k),y=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).deferredPrompt=void 0;var n,i=localStorage.getItem("experiences");return n=null==i?O:JSON.parse(i),a.state={experiences:n,nav:"",showInstallPrompt:!1},a.handleAddExperience=a.handleAddExperience.bind(Object(u.a)(Object(u.a)(a))),a.handleClick=a.handleClick.bind(Object(u.a)(Object(u.a)(a))),a.handleImport=a.handleImport.bind(Object(u.a)(Object(u.a)(a))),a.handleInstall=a.handleInstall.bind(Object(u.a)(Object(u.a)(a))),a.handleNavigation=a.handleNavigation.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleAddExperience",value:function(e,t){var a={id:C()(),name:e,tag:t};this.setState(function(e){return{experiences:[].concat(Object(r.a)(e.experiences),[a])}})}},{key:"handleClick",value:function(e){this.setState({experiences:this.state.experiences.map(function(t){return t.id===e?Object(l.a)({},t,{last:(new Date).getTime()}):t})})}},{key:"handleImport",value:function(e){this.setState({experiences:e})}},{key:"handleInstall",value:function(){var e=this;this.setState({showInstallPrompt:!1}),this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(function(t){"accepted"===t.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),e.deferredPrompt=null})}},{key:"handleNavigation",value:function(e){this.setState({nav:e})}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeinstallprompt",function(t){e.deferredPrompt=t,e.setState({showInstallPrompt:!0})},{once:!0})}},{key:"render",value:function(){return"Preferences"===this.state.nav?n.createElement(w,{export:this.state.experiences,onImport:this.handleImport,onNavigation:this.handleNavigation}):n.createElement(n.Fragment,null,n.createElement(E,{experiences:this.state.experiences,onAddExperience:this.handleAddExperience,onClick:this.handleClick,onNavigation:this.handleNavigation}),this.state.showInstallPrompt&&n.createElement("div",{className:"card fixed-bottom"},n.createElement("div",{className:"card-body"},n.createElement("p",null,"Install web application?"),n.createElement("button",{className:"btn btn-primary",onClick:this.handleInstall},"Install"))))}}]),t}(n.Component),O=[{id:C()(),name:"Eat apple \ud83c\udf4f",last:new Date(2018,4,3).getTime(),tag:"fruit"},{id:C()(),name:"Eat avocado \ud83e\udd51",last:new Date(2016,4,3).getTime(),tag:"fruit"},{id:C()(),name:"Eat banana \ud83c\udf4c",last:new Date(2017,4,3).getTime(),tag:"fruit"},{id:C()(),name:"Eat broccoli \ud83e\udd66",tag:"vegetable"},{id:C()(),name:"Eat carrot \ud83e\udd55",tag:"vegetable"},{id:C()(),name:"Eat cherry \ud83c\udf52",last:new Date(2017,5,3).getTime(),tag:"fruit"},{id:C()(),name:"Eat chili \ud83c\udf36\ufe0f",tag:"fruit"},{id:C()(),name:"Eat cucumber \ud83e\udd52",last:new Date(2017,6,3).getTime(),tag:"vegetable"},{id:C()(),name:"Eat corn \ud83c\udf3d",last:new Date(2017,6,3).getTime(),tag:"vegetable"},{id:C()(),name:"Eat coconut \ud83e\udd65",last:new Date(2017,7,3).getTime(),tag:"fruit"},{id:C()(),name:"Eat eggplant \ud83c\udf46",last:new Date(2017,8,3).getTime(),tag:"vegetable"},{id:C()(),name:"Eat grapes \ud83c\udf47",last:new Date(2017,9,3).getTime(),tag:"fruit"},{id:C()(),name:"Eat leafy green \ud83e\udd6c",tag:"fruit"},{id:C()(),name:"Eat lemon \ud83c\udf4b",tag:"fruit"},{id:C()(),name:"Eat kiwi \ud83e\udd5d",last:new Date(2017,10,3).getTime(),tag:"fruit"},{id:C()(),name:"Eat mango \ud83e\udd6d",last:new Date(2017,11,3).getTime(),tag:"fruit"},{id:C()(),name:"Eat melon \ud83c\udf48",last:new Date(2017,4,3).getTime(),tag:"fruit"},{id:C()(),name:"Eat mushroom \ud83c\udf44",last:new Date(2017,4,3).getTime()},{id:C()(),name:"Eat orange \ud83c\udf4a",last:new Date(2017,4,3).getTime(),tag:"fruit"},{id:C()(),name:"Eat peach \ud83c\udf51",last:new Date(2018,10,1).getTime(),tag:"fruit"},{id:C()(),name:"Eat peanuts \ud83e\udd5c",tag:"fruit"},{id:C()(),name:"Eat pear \ud83c\udf50",last:new Date(2018,10,1).getTime(),tag:"fruit"},{id:C()(),name:"Eat pineapple \ud83c\udf4d",last:new Date(2018,10,1).getTime(),tag:"fruit"},{id:C()(),name:"Eat potato \ud83e\udd54",last:new Date(2018,10,1).getTime(),tag:"vegetable"},{id:C()(),name:"Eat tomato \ud83c\udf45",last:new Date(2018,10,1).getTime(),tag:"vegetable"},{id:C()(),name:"Eat strawberry \ud83c\udf53",last:new Date(2018,10,1).getTime(),tag:"fruit"},{id:C()(),name:"Eat watermelon \ud83c\udf49",last:new Date(2017,4,3).getTime(),tag:"fruit"},{id:C()(),name:"Bake a applepie \ud83e\udd67\ud83c\udf6a",last:new Date(2018,7,13).getTime()},{id:C()(),name:"Bike \ud83d\udeb4",last:new Date(2019,0,11).getTime(),tag:"activity"},{id:C()(),name:"Climb \ud83e\uddd7",last:null,tag:"activity"},{id:C()(),name:"Dance \ud83d\udc83\ud83d\udd7a",last:new Date(2019,0,13).getTime(),tag:"activity"},{id:C()(),name:"Guitar \ud83c\udfb8",last:null,tag:"activity"},{id:C()(),name:"Ice Skate \u26f8\ufe0f",last:new Date(2019,0,13).getTime(),tag:"activity"},{id:C()(),name:"Run \ud83c\udfc3",last:new Date(2019,0,11).getTime(),tag:"activity"},{id:C()(),name:"Paint \ud83c\udfa8",last:new Date(2019,0,11).getTime(),tag:"activity"},{id:C()(),name:"Play chess \u265f\ufe0f",last:new Date(2019,0,11).getTime(),tag:"activity"},{id:C()(),name:"Swim \ud83c\udfca",last:new Date(2019,0,11).getTime(),tag:"activity"},{id:C()(),name:"Yoga \ud83e\uddd8",last:new Date(2019,0,11).getTime(),tag:"activity"},{id:C()(),name:"Wrestle \ud83e\udd3c",last:null,tag:"activity"}],j=y,N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.render(n.createElement(j,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/cocoberry",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/cocoberry","/service-worker.js");N?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):x(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):x(t,e)})}}()}},[[13,2,1]]]);
//# sourceMappingURL=main.47f6ccb7.chunk.js.map